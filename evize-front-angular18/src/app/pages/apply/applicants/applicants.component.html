<section class="bg-white px-4 py-7">
  <div class="flex justify-center w-full">
    <div class="w-full max-w-[1280px] flex flex-col gap-6 md:gap-14">
      <p class="font-medium text-[#E34545] text-center">
        {{ section?.steps?.title }}
      </p>
      <app-application-status-bar [step]="2"></app-application-status-bar>

      <div class="flex flex-col xl:flex-row gap-6 md:gap-14">
        <div
          class="bg-[#E34545]/20 px-7 py-8 bg-opacity-20 rounded-xl shadow-lg flex flex-col gap-4 h-fit w-full xl:max-w-[350px] xl:order-last">
          <p class="text-[#2B2B2B] font-semibold text-center">
            {{ section?.applicant?.notes?.label }}
          </p>
          <div class="flex flex-row gap-1.5" *ngFor="let note of getNotes()">
            <svg width="8" class="shrink-0 mt-1" height="8" viewBox="0 0 8 8" fill="none"
              xmlns="http://www.w3.org/2000/svg">
              <rect width="8" height="8" rx="4" fill="#2B2B2B" />
            </svg>
            <p class="text-[12px]">
              {{ note[""] }}
            </p>
          </div>
        </div>
        <div class="flex flex-col gap-4 w-full">
          <div class="pt-6 flex flex-col lg:flex-row gap-6 md:gap-12">
            <div class="flex flex-col gap-5 w-full" *ngIf="user">
              <div class="flex flex-col gap-6 md:flex-row">
                <div class="w-full">
                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("firstName")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{ user.name }}
                    </div>
                  </div>
                </div>
                <div class="w-full">
                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("secondName")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{ user.secondName }}
                    </div>
                  </div>
                </div>
              </div>
              <div class="flex flex-col gap-2 pt-2 w-full">
                <p class="font-medium">
                  {{ getInput("lastName")?.label }}
                </p>
                <div class="border rounded-md px-2 h-10 flex items-center">
                  {{ user.surname }}
                </div>
              </div>

              <div class="flex flex-col gap-2 pt-2 w-full">
                <p class="font-medium">
                  {{ getInput("birthday")?.label }}
                </p>
                <div class="border rounded-md px-2 h-10 flex items-center">
                  {{ formatDate(user.birthDay) }}
                </div>
              </div>
              <div class="flex flex-col gap-2 pt-2 w-full">
                <p class="font-medium">
                  {{ getInput("nationality")?.label }}
                </p>
                <div class="border rounded-md px-2 h-10 flex items-center">
                  {{ getNationality(user.nationality.name) }}
                </div>
              </div>
              <div class="flex flex-col gap-2 pt-2 w-full">
                <p class="font-medium">
                  {{ getInput("gender")?.label }}
                </p>
                <div class="border rounded-md px-2 h-10 flex items-center">
                  {{ getGender(user.gender == 1 ? "Erkek" : "Kad覺n") }}
                </div>
              </div>

              <div class="flex flex-col gap-6 md:flex-row">
                <div class="w-full">
                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("motherName")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{ user.motherName }}
                    </div>
                  </div>
                </div>
                <div class="w-full">
                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("fatherName")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{ user.fatherName }}
                    </div>
                  </div>
                </div>
              </div>

              <div class="flex flex-col gap-2 pt-2 w-full">
                <p class="font-medium">
                  {{ getInput("address")?.label }}
                </p>
                <div class="border rounded-md px-2 h-10 flex items-center">
                  {{ user.address }}
                </div>
              </div>

              <div class="flex flex-col gap-2 pt-2 w-full">
                <p class="font-medium">
                  {{ getInput("phoneNumber")?.label }}
                </p>
                <div class="border rounded-md px-2 h-10 flex items-center">
                  {{ formatPhone(user) }}
                </div>
              </div>
              <div class="flex flex-col gap-2 pt-2 w-full">
                <p class="font-medium">
                  {{ getInput("email")?.label }}
                </p>
                <div class="border rounded-md px-2 h-10 flex items-center">
                  {{ user.eMail }}
                </div>
              </div>

              <div class="flex flex-col gap-6 md:flex-row">
                <div class="w-full">
                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("passportType")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{
                      getTranslation(application?.travelDocument?.travelDocumentGuid)
                      }}
                    </div>
                  </div>
                </div>
                <div class="w-full">
                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("passportNumber")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{ application?.travelDocument?.passportNumber }}
                    </div>
                  </div>
                </div>
              </div>

              <div class="flex flex-col gap-6 md:flex-row">
                <div class="w-full">
                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("passportIssueDate")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{ formatDate(application?.travelDocument?.passportIssueDate) }}
                    </div>
                  </div>
                </div>
                <div class="w-full">
                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("passportValidityDate")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{ formatDate(application?.travelDocument?.passportValidityDate) }}
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="flex flex-col gap-2 order-first lg:order-last lg:max-w-[200px] shrink-0">
              <div class="bg-[#F2F2F2] w-[200px] h-60 flex justify-center items-center shrink-0 overflow-hidden">
                <label for="upload" class="flex flex-col items-center gap-2 relative">
                  <img alt="" *ngIf="user?.photo" [src]="
                      apiUrl +
                      '/file/get?fileName=' +
                      user.photo +
                      '&mimeType=image%2Fpng'
                    " class="w-full h-auto object-cover object-center" />
                  <svg class="absolute z-20 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
                    [class]="user?.photo ? 'opacity-0' : ''" width="36" height="36" viewBox="0 0 24 24" fill="none"
                    xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M14 2C14 0.89543 13.1046 0 12 0C10.8954 0 10 0.89543 10 2V10H2C0.8954 10 0 10.8954 0 12C0 13.1046 0.8954 14 2 14H10V22C10 23.1046 10.8954 24 12 24C13.1046 24 14 23.1046 14 22V14H22C23.1046 14 24 13.1046 24 12C24 10.8954 23.1046 10 22 10H14V2Z"
                      fill="#333" />
                  </svg>
                </label>
              </div>
            </div>
          </div>
          <div class="w-full flex flex-col gap-6">
            <div class="flex flex-col gap-6 md:flex-row" *ngIf="
                selectedModel?.regime
                  ?.isApplicationAdditionalInformation
              ">
              <div class="flex flex-col gap-2 pt-2 w-full">
                <p class="font-medium" [class]="
                    errors.additionalVisaGuid != '' ? 'text-[#E34545]' : ''
                  ">
                  {{ getInput("additionalVisaType")?.label
                  }}<span class="text-[#E34545]" *ngIf="
                      selectedModel?.regime
                        ?.isApplicationAdditionalInformation
                    ">*</span>
                </p>
                <div class="border rounded-md" [class]="
                    errors.additionalVisaGuid == ''
                      ? 'border-[#DDDDDD]'
                      : ' border-[#E34545]'
                  ">
                  <ng-select
                    class="border-transparent focus:border-transparent focus:!ring-0 focus:outline-none w-full text-[#6E6E6E]"
                    [clearable]="false"
                    (change)="errors.additionalVisaGuid = ''; application?.applicationAdditionalInformation!.additionalVisaCountry=null "
                    [searchable]="true" [(ngModel)]="application?.applicationAdditionalInformation!.additionalVisaGuid"
                    [ngModelOptions]="{ standalone: true }" [placeholder]="getInput('additionalVisaType')?.placeholder">
                    <ng-option *ngFor="let c of additionalVisaTypeGuids()" [value]="c.guid">{{ c.value }}</ng-option>
                  </ng-select>
                </div>
                <p *ngIf="errors.additionalVisaGuid != ''" class="text-[#E34545] text-[14px] text-start error">
                  {{ getErrorMessage(errors.additionalVisaGuid) }}
                </p>
              </div>
              <div class="flex flex-col gap-2 pt-2 w-full">
                <p class="font-medium" [class]="
                    errors.additionalVisaCountry != '' ? 'text-[#E34545]' : ''
                  ">
                  {{ getInput("additionalVisaCountry")
                  }}<span class="text-[#E34545]" *ngIf="
                      applicationService?.selectedModel?.regime
                        ?.isApplicationAdditionalInformation
                    ">*</span>
                </p>
                <div class="border rounded-md" [class]="
                    errors.additionalVisaCountry == ''
                      ? 'border-[#DDDDDD]'
                      : ' border-[#E34545]'
                  ">
                  <ng-select
                    class="border-transparent focus:border-transparent focus:!ring-0 focus:outline-none w-full text-[#6E6E6E]"
                    [clearable]="false" (change)="errors.additionalVisaCountry = ''" [searchable]="true"
                    [(ngModel)]="application?.applicationAdditionalInformation!.additionalVisaCountry"
                    [ngModelOptions]="{ standalone: true }" [placeholder]="getInput('additionalVisaCountry')">
                    <ng-option
                      *ngFor="let c of additionalVisaCountries(application?.applicationAdditionalInformation!.additionalVisaGuid!)"
                      [value]="c.guid">{{ c.name}}</ng-option>
                  </ng-select>
                </div>
                <p *ngIf="errors.additionalVisaCountry != ''" class="text-[#E34545] text-[14px] text-start error">
                  {{ getErrorMessage(errors.additionalVisaCountry) }}
                </p>
              </div>
            </div>

            <div class="flex flex-col gap-6 md:flex-row" *ngIf="
                applicationService?.selectedModel?.regime
                  ?.isApplicationAdditionalInformation
              ">
              <div class="w-full">
                <text-input [(value)]="application?.applicationAdditionalInformation!.additionalVisaNumber"
                  key="additionalVisaNumber" [(error)]="errors.additionalVisaNumber" max="20"
                  [required]="true"></text-input>
              </div>
              <div class="w-full" *ngIf="additionalVisaValidity">
                <date-input [(value)]="application!.applicationAdditionalInformation!.additionalVisaValidityDate"
                  key="additionalVisaValidityDate" [minDate]="additionalVisaValidity"
                  [(error)]="errors.additionalVisaValidityDate" [required]="true"></date-input>
              </div>
            </div>
            <div class="flex flex-col gap-2 pt-2 w-full" *ngIf="
                applicationService?.selectedModel?.regime
                  ?.isApplicationAdditionalInformation
              ">
              <p class="font-medium" [class]="
                  errors.additionalVisaFile != '' ? 'text-[#E34545]' : ''
                ">
                {{ getInput("additionalVisaDocument")?.label
                }}<span class="text-[#E34545]" *ngIf="
                    applicationService?.selectedModel?.regime
                      ?.isApplicationAdditionalInformation
                  ">*</span>
              </p>
              <div class="border rounded-md px-2 relative" [class]="
                  errors.additionalVisaFile == ''
                    ? 'border-[#DDDDDD]'
                    : ' border-[#E34545]'
                ">
                <label for="upload"
                  class="flex flex-row cursor-pointer text-left w-full h-[50px] items-center text-ellipsis overflow-hidden">
                  <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path
                      d="M18.1172 7.35938H14.1562C13.2578 7.35938 12.5312 6.63281 12.5312 5.73438V1.77344C12.7812 1.88281 13.0078 2.03906 13.2109 2.24219L17.6484 6.67969C17.8516 6.88281 18.0078 7.10938 18.1172 7.35938Z"
                      fill="black" />
                    <path
                      d="M14.1563 8.53125C12.6141 8.53125 11.3594 7.27656 11.3594 5.73438V1.5625H5.44531C4.16406 1.5625 3.125 2.60156 3.125 3.88281V19.75C3.125 21.0312 4.16406 22.0703 5.44531 22.0703H12.2195C11.5375 21.1016 11.1336 19.9242 11.1336 18.6523C11.1336 15.3672 13.8055 12.6953 17.0906 12.6953C17.5148 12.6953 17.9281 12.7414 18.3281 12.8266V8.53125H14.1563ZM6.05547 6.23047H9.79922C10.1875 6.23047 10.5023 6.54531 10.5023 6.93359C10.5023 7.32188 10.1875 7.63672 9.79922 7.63672H6.05547C5.66719 7.63672 5.35234 7.32188 5.35234 6.93359C5.35234 6.54531 5.66719 6.23047 6.05547 6.23047ZM9.57734 18.9922H6.05391C5.66563 18.9922 5.35078 18.6773 5.35078 18.2891C5.35078 17.9008 5.66563 17.5859 6.05391 17.5859H9.57734C9.96562 17.5859 10.2805 17.9008 10.2805 18.2891C10.2805 18.6773 9.96562 18.9922 9.57734 18.9922ZM10.8273 15.2031H6.05391C5.66563 15.2031 5.35078 14.8883 5.35078 14.5C5.35078 14.1117 5.66563 13.7969 6.05391 13.7969H10.8273C11.2156 13.7969 11.5305 14.1117 11.5305 14.5C11.5305 14.8883 11.2156 15.2031 10.8273 15.2031ZM15.3945 11.4211H6.05547C5.66719 11.4211 5.35234 11.1062 5.35234 10.718C5.35234 10.3297 5.66719 10.0148 6.05547 10.0148H15.3938C15.782 10.0148 16.0969 10.3297 16.0969 10.718C16.0969 11.1062 15.7828 11.4211 15.3945 11.4211Z"
                      fill="black" />
                    <path
                      d="M17.0908 13.8672C14.4479 13.8672 12.3057 16.0094 12.3057 18.6523C12.3057 21.2953 14.4486 23.4375 17.0908 23.4375C19.7338 23.4375 21.876 21.2953 21.876 18.6523C21.876 16.0094 19.7338 13.8672 17.0908 13.8672ZM18.7439 18.6672C18.6096 18.7883 18.4416 18.8477 18.2736 18.8477C18.0986 18.8477 17.9291 18.7742 17.7939 18.6461V20.4734C17.7939 20.8617 17.4791 21.1766 17.0908 21.1766C16.7025 21.1766 16.3877 20.8617 16.3877 20.4734V18.6469C16.1244 18.8969 15.7127 18.9141 15.4377 18.6672C15.1486 18.407 15.126 17.9625 15.3854 17.6742L16.5682 16.3609C16.7018 16.2125 16.8916 16.1281 17.0908 16.1281C17.29 16.1281 17.4799 16.2125 17.6135 16.3609L18.7955 17.6742C19.0557 17.9633 19.0322 18.4078 18.7439 18.6672Z"
                      fill="black" />
                  </svg>

                  {{
                  status == "uploading"
                  ? section?.applicant?.uploading
                  : status == "fail"
                  ? section?.applicant?.uploadFailed
                  : application?.applicationAdditionalInformation?.additionalVisaFile
                  }}
                </label>
                <input id="upload" type="file" class="hidden" (change)="onAssetChange($event)" [placeholder]="
                    getInput('additionalVisaDocument')?.placeholder
                  " />
              </div>
              <p *ngIf="errors.additionalVisaFile != ''" class="text-[#E34545] text-[14px] text-start error">
                {{ getErrorMessage(errors.additionalVisaFile) }}
              </p>
            </div>
            <button
              class="flex flex-row gap-4 items-center border border-[#E34545] rounded-md py-3 min-w-[120px] w-full md:w-fit justify-center"
              (click)="toProfile()">
              <p class="font-medium text-[#E34545]">
                {{ getInput("edit") }}
              </p>
            </button>
            <div class="w-full flex flex-col gap-7 pt-4"
              *ngFor="let additionalMember of additionalMembers; let i = index">
              <div
                class="py-4 px-5 md:px-9 flex flex-row justify-between items-center rounded-md cursor-pointer select-none"
                [class]="selectedIndex == i ? 'bg-[#E34545]' : 'bg-[#F1F1F1]'"
                (click)="selectedIndex = selectedIndex == i ? -1 : i"
                (keyPress)="selectedIndex = selectedIndex == i ? -1 : i">
                <p class="text-[20px] font-semibold" [class]="selectedIndex == i ? 'text-white' : 'text-[#6B6B6B]'">
                  {{ section?.applications?.additionalPersonTitle }}
                  <span *ngIf="getPerson(i)">
                    ({{
                    getPerson(i).name +
                    " " +
                    (getPerson(i).secondName
                    ? getPerson(i).secondName + " "
                    : "") +
                    getPerson(i).surname
                    }})</span>
                </p>
                <div class="flex flex-row gap-4">
                  <svg [class]="
                      selectedIndex == i
                        ? 'text-white rotate-180'
                        : 'text-[#A4A4A4]'
                    " width="28" height="28" viewBox="0 0 28 28" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <g clip-path="url(#clip0_1095_40122)">
                      <path
                        d="M0 14C0 6.2802 6.28087 0 14 0C21.7191 0 28 6.2802 28 14C28 21.7199 21.7191 28.0001 14 28.0001C6.28081 28.0001 0 21.7199 0 14ZM7.41014 13.5899L13.0102 19.1898C13.5571 19.7367 14.443 19.7367 14.9898 19.1898L20.5899 13.5899C21.1368 13.043 21.1368 12.157 20.5899 11.6102C20.043 11.0634 19.157 11.0633 18.6102 11.6102L14 16.2204L9.38987 11.6102C8.84298 11.0633 7.95703 11.0633 7.4102 11.6102C7.13678 11.8836 7.00004 12.2418 7.00004 12.6001C6.99999 12.9582 7.13672 13.3164 7.41014 13.5899Z"
                        fill="currentColor" />
                    </g>
                    <defs>
                      <clipPath id="clip0_1095_40122">
                        <rect width="28" height="28" fill="white" transform="matrix(0 1 -1 0 28 0)" />
                      </clipPath>
                    </defs>
                  </svg>
                  <div class="rounded-lg flex items-center justify-center cursor-pointer"
                    (click)="setRemovePerson(additionalMember, i)" (keyPress)="setRemovePerson(additionalMember, i)">
                    <svg [class]="
                        selectedIndex == i ? 'text-white' : 'text-[#A4A4A4]'
                      " width="24" height="24" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M13.3333 5.00002V4.33335C13.3333 3.39993 13.3333 2.93322 13.1517 2.5767C12.9919 2.2631 12.7369 2.00813 12.4233 1.84834C12.0668 1.66669 11.6001 1.66669 10.6667 1.66669H9.33333C8.39991 1.66669 7.9332 1.66669 7.57668 1.84834C7.26308 2.00813 7.00811 2.2631 6.84832 2.5767C6.66667 2.93322 6.66667 3.39993 6.66667 4.33335V5.00002M8.33333 9.58335V13.75M11.6667 9.58335V13.75M2.5 5.00002H17.5M15.8333 5.00002V14.3334C15.8333 15.7335 15.8333 16.4336 15.5608 16.9683C15.3212 17.4387 14.9387 17.8212 14.4683 18.0609C13.9335 18.3334 13.2335 18.3334 11.8333 18.3334H8.16667C6.76654 18.3334 6.06647 18.3334 5.53169 18.0609C5.06129 17.8212 4.67883 17.4387 4.43915 16.9683C4.16667 16.4336 4.16667 15.7335 4.16667 14.3334V5.00002"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" />
                    </svg>
                  </div>
                </div>
              </div>
              <div *ngIf="selectedIndex == i">
                <p class="font-medium text-start" [class]="
                    getPersonError(additionalMember) ? 'text-[#E34545]' : ''
                  ">
                  {{ getInput("peopleName")?.label
                  }}<span class="text-[#E34545]">*</span>
                </p>
                <div class="border rounded-md" [class]="
                    getPersonError(additionalMember)
                      ? 'border-[#E34545]'
                      : ' border-[#DDDDDD]'
                  ">
                  <ng-select
                    class="border-transparent focus:border-transparent focus:!ring-0 focus:outline-none w-full text-[#6E6E6E] text-start"
                    [clearable]="false" [searchable]="true" [(ngModel)]="additionalMembers[i]"
                    [ngModelOptions]="{ standalone: true }" (change)="checkMember(i)"
                    [placeholder]="getInput('peopleName')?.placeholder">
                    <ng-option *ngFor="let person of getPeople(additionalMembers[i])" [value]="person.guid">{{
                      person.name +
                      " " +
                      (person.secondName ? person.secondName + " " : "") +
                      person.surname
                      }}</ng-option>
                  </ng-select>
                </div>

                <p *ngIf="getPersonError(additionalMember)" class="text-[#E34545] text-[14px] text-start error pb-2">
                  {{ getErrorMessage("invalid") }}
                </p>
                <div class="flex flex-row gap-4 pt-2">
                  <button
                    class="flex flex-row gap-4 items-center border border-[#E34545] rounded-md py-3 min-w-[120px] w-full md:w-fit justify-center"
                    *ngIf="getPerson(i) && getPersonError(additionalMember)" (click)="toPerson(i)">
                    <p class="font-medium text-[#E34545]">
                      {{ getInput("edit") }}
                    </p>
                  </button>

                  <button
                    class="flex flex-row gap-4 items-center bg-[#E34545] rounded-md py-3 min-w-[140px] w-full md:w-fit justify-center"
                    (click)="toNewPerson(i)" *ngIf="!getPerson(i)">
                    <p class="font-medium text-white">
                      {{ profileSection?.registeredUsers?.addPeople }}
                    </p>
                  </button>
                </div>
              </div>
              <div class="pt-6 flex flex-col lg:flex-row gap-6 md:gap-12" *ngIf="getPerson(i) && selectedIndex == i">
                <div class="flex flex-col gap-5 w-full max-w-[800px]">
                  <div class="flex flex-col gap-6 md:flex-row">
                    <div class="w-full">
                      <div class="flex flex-col gap-2 pt-2 w-full">
                        <p class="font-medium">
                          {{ getInput("firstName")?.label }}
                        </p>
                        <div class="border rounded-md px-2 h-10 flex items-center">
                          {{ getPerson(i).name }}
                        </div>
                      </div>
                    </div>
                    <div class="w-full">
                      <div class="flex flex-col gap-2 pt-2 w-full">
                        <p class="font-medium">
                          {{ getInput("secondName")?.label }}
                        </p>
                        <div class="border rounded-md px-2 h-10 flex items-center">
                          {{ getPerson(i).secondName }}
                        </div>
                      </div>
                    </div>
                  </div>
                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("lastName")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{ getPerson(i).surname }}
                    </div>
                  </div>

                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("birthday")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{ formatDate(getPerson(i).birthDay) }}
                    </div>
                  </div>
                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("nationality")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{ getNationality(getPerson(i).nationality.name) }}
                    </div>
                  </div>
                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("gender")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{
                      getGender(getPerson(i).gender == 1 ? "Erkek" : "Kad覺n")
                      }}
                    </div>
                  </div>

                  <div class="flex flex-col gap-6 md:flex-row">
                    <div class="w-full">
                      <div class="flex flex-col gap-2 pt-2 w-full">
                        <p class="font-medium">
                          {{ getInput("motherName")?.label }}
                        </p>
                        <div class="border rounded-md px-2 h-10 flex items-center">
                          {{ getPerson(i).motherName }}
                        </div>
                      </div>
                    </div>
                    <div class="w-full">
                      <div class="flex flex-col gap-2 pt-2 w-full">
                        <p class="font-medium">
                          {{ getInput("fatherName")?.label }}
                        </p>
                        <div class="border rounded-md px-2 h-10 flex items-center">
                          {{ getPerson(i).fatherName }}
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("address")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{ getPerson(i).address }}
                    </div>
                  </div>

                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("phoneNumber")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{ formatPhone(getPerson(i)) }}
                    </div>
                  </div>
                  <div class="flex flex-col gap-2 pt-2 w-full">
                    <p class="font-medium">
                      {{ getInput("email")?.label }}
                    </p>
                    <div class="border rounded-md px-2 h-10 flex items-center">
                      {{ getPerson(i).eMail }}
                    </div>
                  </div>

                  <div class="flex flex-col gap-6 md:flex-row">
                    <div class="w-full">
                      <div class="flex flex-col gap-2 pt-2 w-full">
                        <p class="font-medium">
                          {{ getInput("passportType")?.label }}
                        </p>
                        <div class="border rounded-md px-2 h-10 flex items-center">
                          {{
                          getTranslation(getPerson(i).travelDocumentMemberDtos[getPerson(i).travelDocumentMemberDtos.length-1]?.travelDocumentGuid)
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="w-full">
                      <div class="flex flex-col gap-2 pt-2 w-full">
                        <p class="font-medium">
                          {{ getInput("passportNumber")?.label }}
                        </p>
                        <div class="border rounded-md px-2 h-10 flex items-center">
                          {{
                          getPerson(i).travelDocumentMemberDtos[getPerson(i).travelDocumentMemberDtos.length-1]?.passportNumber
                          }}
                        </div>
                      </div>
                    </div>
                  </div>

                  <div class="flex flex-col gap-6 md:flex-row">
                    <div class="w-full">
                      <div class="flex flex-col gap-2 pt-2 w-full">
                        <p class="font-medium">
                          {{ getInput("passportIssueDate")?.label }}
                        </p>
                        <div class="border rounded-md px-2 h-10 flex items-center">
                          {{
                          formatDate(
                          getPerson(i).travelDocumentMemberDtos[getPerson(i).travelDocumentMemberDtos.length-1]?.passportIssueDate
                          )
                          }}
                        </div>
                      </div>
                    </div>
                    <div class="w-full">
                      <div class="flex flex-col gap-2 pt-2 w-full">
                        <p class="font-medium">
                          {{ getInput("passportValidityDate")?.label }}
                        </p>
                        <div class="border rounded-md px-2 h-10 flex items-center">
                          {{
                          formatDate(
                          getPerson(i).travelDocumentMemberDtos[getPerson(i).travelDocumentMemberDtos.length-1]?.passportValidityDate
                          )
                          }}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="flex flex-col gap-2 order-first lg:order-last lg:max-w-[200px]"
                  *ngIf="getPerson(i) && selectedIndex == i">
                  <div class="bg-[#F2F2F2] w-[200px] h-60 flex justify-center items-center shrink-0 overflow-hidden">
                    <label for="upload" class="flex flex-col items-center gap-2 relative">
                      <img alt="" *ngIf="getPerson(i)?.photo" [src]="
                          apiUrl +
                          '/file/get?fileName=' +
                          getPerson(i).photo +
                          '&mimeType=image%2Fpng'
                        " class="w-full h-auto object-cover object-center" />
                      <svg class="absolute z-20 top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2"
                        [class]="getPerson(i)?.photo ? 'opacity-0' : ''" width="36" height="36" viewBox="0 0 24 24"
                        fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path
                          d="M14 2C14 0.89543 13.1046 0 12 0C10.8954 0 10 0.89543 10 2V10H2C0.8954 10 0 10.8954 0 12C0 13.1046 0.8954 14 2 14H10V22C10 23.1046 10.8954 24 12 24C13.1046 24 14 23.1046 14 22V14H22C23.1046 14 24 13.1046 24 12C24 10.8954 23.1046 10 22 10H14V2Z"
                          fill="#333" />
                      </svg>
                    </label>
                  </div>
                </div>
              </div>

              <div class="flex flex-col gap-6 md:flex-row"
                *ngIf="getPerson(i) && visaTypeId == 2 && selectedIndex == i">
                <div class="flex flex-col gap-2 pt-2 w-full">
                  <p class="font-medium" [class]="
                      transitErrors[i].flightInformation != ''
                        ? 'text-[#E34545]'
                        : ''
                    ">
                    {{ getInput("flightInformation")?.label
                    }}<span class="text-[#E34545]">*</span>
                  </p>
                  <div class="border rounded-md" [class]="
                      transitErrors[i].flightInformation == ''
                        ? 'border-[#DDDDDD]'
                        : ' border-[#E34545]'
                    ">
                    <ng-select
                      class="border-transparent focus:border-transparent focus:!ring-0 focus:outline-none w-full text-[#6E6E6E]"
                      [clearable]="false" [searchable]="true" [(ngModel)]="additionalInformation[i].flightInformation"
                      (change)="transitErrors[i].flightInformation = ''" [ngModelOptions]="{ standalone: true }"
                      [placeholder]="getInput('flightInformation')?.placeholder">
                      <ng-option value="1">{{
                        getFlightInformation("Bilet Numaras覺")
                        }}</ng-option>
                      <ng-option value="2">{{
                        getFlightInformation("Rezervasyon Numaras覺")
                        }}</ng-option>
                    </ng-select>
                  </div>
                </div>
                <div class="flex flex-col gap-2 w-full" *ngIf="additionalInformation[i].flightInformation == '1'">
                  <text-input [(value)]="additionalInformation[i].ticketNumber" key="ticketInformation"
                    [(error)]="transitErrors[i].ticketNumber" [required]="true" max="15"></text-input>
                </div>
                <div class="flex flex-col gap-2 w-full" *ngIf="additionalInformation[i].flightInformation == '2'">
                  <text-input [(value)]="additionalInformation[i].ticketReservationNumber" key="reservationNumber"
                    [(error)]="transitErrors[i].ticketReservationNumber" [required]="true" max="15"></text-input>
                </div>
              </div>

              <div class="flex flex-col gap-6 md:flex-row" *ngIf="
                  applicationService?.selectedModel?.regime
                    ?.isApplicationAdditionalInformation &&
                  getPerson(i) &&
                  selectedIndex == i
                ">
                <div class="flex flex-col gap-2 pt-2 w-full">
                  <p class="font-medium" [class]="
                      fileErrors[i].additionalVisaGuid != ''
                        ? 'text-[#E34545]'
                        : ''
                    ">
                    {{ getInput("additionalVisaType")?.label
                    }}<span class="text-[#E34545]" *ngIf="
                        applicationService?.selectedModel?.regime
                          ?.isApplicationAdditionalInformation
                      ">*</span>
                  </p>
                  <div class="border rounded-md" [class]="
                      fileErrors[i].additionalVisaGuid == ''
                        ? 'border-[#DDDDDD]'
                        : ' border-[#E34545]'
                    ">
                    <ng-select
                      class="border-transparent focus:border-transparent focus:!ring-0 focus:outline-none w-full text-[#6E6E6E]"
                      [clearable]="false"
                      (change)="fileErrors[i].additionalVisaGuid = ''; additionalFiles[i].additionalVisaCountry=null"
                      [searchable]="true" [(ngModel)]="additionalFiles[i].additionalVisaGuid"
                      [ngModelOptions]="{ standalone: true }" [placeholder]="
                        getInput('additionalVisaType')?.placeholder
                      ">
                      <ng-option *ngFor="let c of additionalVisaTypeGuids()" [value]="c.guid">{{ c.value }}</ng-option>
                    </ng-select>
                  </div>
                  <p *ngIf="fileErrors[i].additionalVisaGuid != ''" class="text-[#E34545] text-[14px] text-start error">
                    {{ getErrorMessage(fileErrors[i].additionalVisaGuid) }}
                  </p>
                </div>

                <div class="flex flex-col gap-2 pt-2 w-full">
                  <p class="font-medium" [class]="
                      fileErrors[i].additionalVisaCountry != ''
                        ? 'text-[#E34545]'
                        : ''
                    ">
                    {{ getInput("additionalVisaCountry")
                    }}<span class="text-[#E34545]" *ngIf="
                        applicationService?.selectedModel?.regime
                          ?.isApplicationAdditionalInformation
                      ">*</span>
                  </p>
                  <div class="border rounded-md" [class]="
                      fileErrors[i].additionalVisaCountry == ''
                        ? 'border-[#DDDDDD]'
                        : ' border-[#E34545]'
                    ">
                    <ng-select
                      class="border-transparent focus:border-transparent focus:!ring-0 focus:outline-none w-full text-[#6E6E6E]"
                      [clearable]="false" (change)="fileErrors[i].additionalVisaCountry = ''" [searchable]="true"
                      [(ngModel)]="additionalFiles[i].additionalVisaCountry" [ngModelOptions]="{ standalone: true }"
                      [placeholder]="getInput('additionalVisaCountry')">
                      <ng-option *ngFor="let c of additionalVisaCountries(additionalFiles[i].additionalVisaGuid)"
                        [value]="c.guid">{{c.name }}</ng-option>
                    </ng-select>
                  </div>
                  <p *ngIf="fileErrors[i].additionalVisaCountry != ''"
                    class="text-[#E34545] text-[14px] text-start error">
                    {{ getErrorMessage(fileErrors[i].additionalVisaCountry) }}
                  </p>
                </div>
              </div>

              <div class="flex flex-col gap-6 md:flex-row" *ngIf="
                  applicationService?.selectedModel?.regime
                    ?.isApplicationAdditionalInformation &&
                  getPerson(i) &&
                  selectedIndex == i
                ">
                <div class="w-full">
                  <text-input [(value)]="additionalFiles[i].additionalVisaNumber" key="additionalVisaNumber"
                    [(error)]="fileErrors[i].additionalVisaNumber" [max]="20" [required]="true"></text-input>
                </div>
                <div class="w-full">
                  <date-input [(value)]="additionalFiles[i].additionalVisaValidityDate" key="additionalVisaValidityDate"
                    [minDate]="additionalVisaValidity" [(error)]="fileErrors[i].additionalVisaValidityDate"
                    [required]="true"></date-input>
                </div>
              </div>
              <div class="flex flex-col gap-2 pt-2 w-full" *ngIf="
                  applicationService?.selectedModel?.regime
                    ?.isApplicationAdditionalInformation &&
                  getPerson(i) &&
                  selectedIndex == i
                ">
                <p class="font-medium" [class]="
                    fileErrors[i].additionalVisaFile != ''
                      ? 'text-[#E34545]'
                      : ''
                  ">
                  {{ getInput("additionalVisaDocument")?.label
                  }}<span class="text-[#E34545]" *ngIf="
                      applicationService?.selectedModel?.regime
                        ?.isApplicationAdditionalInformation
                    ">*</span>
                </p>
                <div class="border rounded-md px-2 relative" [class]="
                    fileErrors[i].additionalVisaFile == ''
                      ? 'border-[#DDDDDD]'
                      : ' border-[#E34545]'
                  ">
                  <label [for]="'upload_' + i"
                    class="flex flex-row cursor-pointer text-left w-full h-[50px] items-center text-ellipsis overflow-hidden">
                    <svg width="25" height="25" viewBox="0 0 25 25" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path
                        d="M18.1172 7.35938H14.1562C13.2578 7.35938 12.5312 6.63281 12.5312 5.73438V1.77344C12.7812 1.88281 13.0078 2.03906 13.2109 2.24219L17.6484 6.67969C17.8516 6.88281 18.0078 7.10938 18.1172 7.35938Z"
                        fill="black" />
                      <path
                        d="M14.1563 8.53125C12.6141 8.53125 11.3594 7.27656 11.3594 5.73438V1.5625H5.44531C4.16406 1.5625 3.125 2.60156 3.125 3.88281V19.75C3.125 21.0312 4.16406 22.0703 5.44531 22.0703H12.2195C11.5375 21.1016 11.1336 19.9242 11.1336 18.6523C11.1336 15.3672 13.8055 12.6953 17.0906 12.6953C17.5148 12.6953 17.9281 12.7414 18.3281 12.8266V8.53125H14.1563ZM6.05547 6.23047H9.79922C10.1875 6.23047 10.5023 6.54531 10.5023 6.93359C10.5023 7.32188 10.1875 7.63672 9.79922 7.63672H6.05547C5.66719 7.63672 5.35234 7.32188 5.35234 6.93359C5.35234 6.54531 5.66719 6.23047 6.05547 6.23047ZM9.57734 18.9922H6.05391C5.66563 18.9922 5.35078 18.6773 5.35078 18.2891C5.35078 17.9008 5.66563 17.5859 6.05391 17.5859H9.57734C9.96562 17.5859 10.2805 17.9008 10.2805 18.2891C10.2805 18.6773 9.96562 18.9922 9.57734 18.9922ZM10.8273 15.2031H6.05391C5.66563 15.2031 5.35078 14.8883 5.35078 14.5C5.35078 14.1117 5.66563 13.7969 6.05391 13.7969H10.8273C11.2156 13.7969 11.5305 14.1117 11.5305 14.5C11.5305 14.8883 11.2156 15.2031 10.8273 15.2031ZM15.3945 11.4211H6.05547C5.66719 11.4211 5.35234 11.1062 5.35234 10.718C5.35234 10.3297 5.66719 10.0148 6.05547 10.0148H15.3938C15.782 10.0148 16.0969 10.3297 16.0969 10.718C16.0969 11.1062 15.7828 11.4211 15.3945 11.4211Z"
                        fill="black" />
                      <path
                        d="M17.0908 13.8672C14.4479 13.8672 12.3057 16.0094 12.3057 18.6523C12.3057 21.2953 14.4486 23.4375 17.0908 23.4375C19.7338 23.4375 21.876 21.2953 21.876 18.6523C21.876 16.0094 19.7338 13.8672 17.0908 13.8672ZM18.7439 18.6672C18.6096 18.7883 18.4416 18.8477 18.2736 18.8477C18.0986 18.8477 17.9291 18.7742 17.7939 18.6461V20.4734C17.7939 20.8617 17.4791 21.1766 17.0908 21.1766C16.7025 21.1766 16.3877 20.8617 16.3877 20.4734V18.6469C16.1244 18.8969 15.7127 18.9141 15.4377 18.6672C15.1486 18.407 15.126 17.9625 15.3854 17.6742L16.5682 16.3609C16.7018 16.2125 16.8916 16.1281 17.0908 16.1281C17.29 16.1281 17.4799 16.2125 17.6135 16.3609L18.7955 17.6742C19.0557 17.9633 19.0322 18.4078 18.7439 18.6672Z"
                        fill="black" />
                    </svg>

                    {{
                    status == "uploading"
                    ? section?.applicant?.uploading
                    : status == "fail"
                    ? section?.applicant?.uploadFailed
                    : additionalFiles[i].additionalDoc
                    }}
                  </label>
                  <input [id]="'upload_' + i" type="file" class="hidden" (change)="onPeopleAssetChange($event, i)"
                    [placeholder]="
                      getInput('additionalVisaDocument')?.placeholder
                    " />
                </div>
                <p *ngIf="fileErrors[i].additionalVisaFile != ''" class="text-[#E34545] text-[14px] text-start error">
                  {{ getErrorMessage(fileErrors[i].additionalVisaFile) }}
                </p>
              </div>
              <button
                class="flex flex-row gap-4 items-center border border-[#E34545] rounded-md py-3 min-w-[120px] w-full md:w-fit justify-center"
                *ngIf="
                  getPerson(i) &&
                  !getPersonError(additionalMember) &&
                  selectedIndex == i
                " (click)="toPerson(i)">
                <p class="font-medium text-[#E34545]">
                  {{ getInput("edit") }}
                </p>
              </button>
            </div>
            <div class="flex flex-col w-full sm:w-fit sm:flex-row gap-4 self-end pt-4">
              <button
                class="flex flex-row gap-4 items-center border border-[#E34545] rounded-md py-3 min-w-[120px] w-full sm:w-fit justify-center"
                (click)="back()">
                <p class="font-medium text-[#E34545]">
                  {{ section?.applicant?.back }}
                </p>
              </button>
              <button
                class="border border-[#E34545] px-4 py-4 lg:my-0 rounded-md w-full lg:max-w-[220px] font-medium text-[#E34545]"
                (click)="addPerson()" *ngIf="additionalMembers.length < 10">
                {{ profileSection?.registeredUsers?.addPeople }}
              </button>

              <button
                class="flex flex-row gap-4 items-center bg-[#E34545] rounded-md py-3 min-w-[200px] w-full md:w-fit justify-center"
                (click)="nextStep()">
                <p class="font-medium text-white">
                  {{ section?.applicant?.continue }}
                </p>
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>
<visa-result-error-modal [(visible)]="showErrorModal"></visa-result-error-modal>
<visa-result-exempt-modal [(visible)]="showExemptModal"
  [conditions]="selectedModelConditions"></visa-result-exempt-modal>
<visa-result-date-error-modal [(visible)]="showDateError"></visa-result-date-error-modal>
<missing-information-applicant-modal [(visible)]="showMissingInformation"
  [errors]="missingErrors"></missing-information-applicant-modal>
<cannot-apply-modal [(visible)]="cannotApplyModal" [errors]="cannotApplyUser"></cannot-apply-modal>